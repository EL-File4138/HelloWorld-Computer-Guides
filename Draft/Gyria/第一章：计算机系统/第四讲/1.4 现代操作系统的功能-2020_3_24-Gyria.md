前言：伴随计算机硬件和网络技术的发展,作为计算机系统中的重要组成部分的操作系统也在不断发展，上一讲回顾了操作系统的发展历史,而这一讲我们来讲讲现代操作系统的主要组成部分。

## 现代操作系统的主要功能

操作系统位于底层硬件与用户之间，是两者沟通的桥梁。用户可以通过操作系统的用户界面，输入命令。操作系统则对命令进行解释，驱动硬件设备，实现用户要求。以现代标准而言，一个标准PC的操作系统应该提供以下的功能：
- 进程管理（Processing management）
- 内存管理（Memory management）
- 文件系统（File system）
- 网络通信（Networking）
- 安全机制（Security）
- 用户界面（User interface）
- 驱动程序（Device drivers）

### 进程管理

我们先来了解一下什么是进程和线程。

进程（英语：Process），是指计算机中已运行的程序。程序本身只是指令、数据及其组织形式的描述，进程才是程序（那些指令和数据）的真正运行实例。现代计算机系统可在同一段时间内以进程的形式将多个程序加载到存储器中，，以在一个处理器上表现出同时运行的感觉。同样的，使用多线程技术的操作系统或计算机体系结构，同样程序的平行线程，可在多CPU主机上真正同时运行（在不同的CPU上）。

线程（英语：Thread）是操作系统能够进行运算调度的最小单位。大部分情况下，它被包含在进程之中，是进程中的实际运作单位。一条线程指的是进程中一个单一顺序的控制流，一个进程中可以并发多个线程，每条线程并行执行不同的任务。

一个进程可以有很多线程，每条线程并行执行不同的任务。

在多核或多CPU，或支持Hyper-threading的CPU上使用多线程程序设计的好处是显而易见的，即提高了程序的执行吞吐率。在单CPU单核的计算机上，使用多线程技术，也可以把进程中负责I/O处理、人机交互而常被阻塞的部分与密集计算的部分分开来执行，从而提高了程序的执行效率。

当年运用冯·诺伊曼结构建造电脑时，每个中央处理器最多只能同时运行一个进程。早期的操作系统（例如DOS）也不允许任何程序打破这个限制，且DOS同时只有运行一个进程。现代的操作系统，即使只拥有一个CPU，也可以利用多进程（multitask）功能同时执行多个进程。进程管理指的是操作系统调整多个进程的功能。

### 内存管理

根据帕金森定律：“你给程序再多内存，程序也会想尽办法耗光”，因此程序员通常希望系统给他无限量且无限快的存储器。大部分的现代电脑存储器架构都是层次结构式的，最快且数量最少的寄存器为首，然后是缓存、存储器以及最慢的磁盘存储设备。

存储器管理的另一个重点活动就是借由CPU的帮助来管理虚拟位置。如果同时有许多进程存储于设备上，操作系统必须防止它们互相干扰对方的存储器内容。分割存储器空间可以达成目标。每个进程只会看到整个存储器空间（从0到存储器空间的最大上限）被配置给它自己。

借由对每个进程产生分开独立的位置空间，操作系统也可以轻易地一次释放某进程所占据的所有存储器。如果这个进程不释放存储器，操作系统可以结束进程并将存储器自动释放。

### 文件系统

文件系统是一种存储和组织计算机数据的方法，它使得对其访问和查找变得容易，文件系统使用文件和树形目录的抽象逻辑概念代替了硬盘和光盘等物理设备使用数据块的复杂概念，用户使用文件系统来保存数据不必关心数据实际保存在硬盘（或者光盘）的地址为多少的数据块上，只需要记住这个文件的所属目录和文件名。在写入新数据之前，用户不必关心硬盘上的那个块地址没有被使用，硬盘上的存储空间管理（分配和释放）功能由文件系统自动完成，用户只需要记住数据被写入到了哪个文件中。

每个文件系统都实现相似的目录／子目录架构，但在相似之下也有许多不同点。微软使用“\”符号以创建目录／子目录关系，且文件名称忽略其大小写差异；UNIX系统则是以“/”创建目录架构，且文件名称大小写有差异。(其实这是给系统调用的，"/"或"\"并不实际存在硬盘)

### 网络通信

许多现代的操作系统都具备操作主流网络通信协议TCP/IP的能力。也就是说这样的操作系统可以进入网络世界，并且与其他系统分享诸如文件、打印机与扫描仪等资源。（以后会专门有一章来讲计算机网络通信）

### 安全机制

大多数操作系统都含有某种程度的信息安全机制。信息安全机制主要基于两大理念：
- 操作系统提供外界访问资源的管道，例如本地端磁盘驱动器的文件、受保护的特权系统调用、用户的隐私数据与系统运行的程序所提供的服务。
- 操作系统有能力认证资源访问的请求。允许通过认证的请求并拒绝无法通过的非法请求，并将适当的权力授权给此请求。

在某些系统上，一个程序一旦可执行就可做任何事情（例如DOS时代的病毒），但通常操作系统会给程序一个识别代号，并且在此程序发出请求时，检查其代号与所需资源的访问权限关系。

### 用户界面

今日大部分的操作系统都包含图形用户界面（GUI）。
许多操作系统允许用户安装或创造任何他们喜欢的图形用户界面。而某些操作系统就没有这么弹性的图形用户界面，例如Windows。这类的操作系统只能透过外加的程序来改变其图形用户界面，甚至根本只能改变诸如菜单风格或颜色配置等部分。

图形用户界面与时并进，例如Windows在每次新版本上市时就会将其图形用户界面改头换面，而Mac OS的GUI也在Mac OS X上市时出现重大转变。

### 驱动程序

驱动程序（driver），是一个允许高端电脑软件与硬件交互的程序，这种程序创建了一个硬件与硬件，或硬件与软件沟通的接口，经由主板上的总线（bus）或其它沟通子系统与硬件形成连接的机制，这样的机制使得硬件设备上的数据交换成为可能。（例如U盘拷贝电脑上的文件）

设计驱动程序的主要目的在于操作抽象化，任何硬件模块在硬件设计面上有巨大差异。厂商推出的较新模块通常更可靠更有效率，控制方法也会有所不同。电脑与其操作系统每每不能预期那些现有与新设备的变异之处，因此无法知道其操作方法。为解决此问题操作系统通常会主动制订每种设备该有的操作方式，而驱动程序功能则是将那些操作系统制订的行为描述，转译为可让设备了解的自定义操作手法。

理论上适合的驱动程序一旦安装，相对应的新设备就可以无误地运行。此新驱动程序可以让此设备完美地切合在操作系统中，让用户察觉不到这是操作系统原本没有的功能。

#### 常见的驱动程序应用

因为常见的硬件和操作系统的差异性，驱动程序存在着不同的方式。用于：
打印机、显卡、网卡、声卡、不同种类的总线、不同种类的低带宽的输入/输出总线（如定点设备：鼠标、键盘、USB等等。）
硬盘的连接接口/RAID（RAID，SCSI）;实现对不同的文件系统的支持。实现对扫描仪、数字相机的支持。
