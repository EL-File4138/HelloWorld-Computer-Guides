# 第三节 IP地址与域名

*Author: Gyria*

*Editor：EL_File4138&Rikakoist*

前言：在生活中，我们需要记住各种类型的地址以便与他人通信联络，如邮政编码、独立的街道地址、电话号码等。在因特网上也是如此，网站在因特网上也有相应的“名字”，这就是域名。为了唯一标识网络中的计算机，分别定义了 IP 地址和域名这两个概念。这一讲我们将学习因特网是如何组织和管理的。

## 域名

什么是域名？域名是因特网上一个服务器或者一个网络系统的名字，网络间正是通过域名相互进行访问的。在全世界没有重复的域名。

如同父母给自己的孩子起名字要考虑多种因素一样，域名的选取也会受到各种各样的因素影响，比如：是否便于记忆？是否足够响亮？

### 域名的基本结构

在因特网中，用户可以用各种各样的方式来命名自己的网站，这样就可能出现重名现象，因而就不能唯一地标识因特网中的主机位置。为了解决这个问题，因特网管理机构采取在主机名后加上后缀的方法来标识主机的区域位置，这个后缀名词称为域名。域名是通过合法申请得到的。

这样，在因特网上的主机就可以用形如“主机名.域名”的域名系统唯一地进行标识。

为了防止重复，域名系统采用层次结构，按地域或机构域进行分层。从右到左依次为顶级域名段（TLD）、次高域名段、最左边的为主机名。

附图:3.1

顶级域名为代表某个国家、地区或大型机构的国家代码，如下图所示，这里的顶级域名 cn 代表的是中国，二级域名是 com，sina 为主机名，也叫三级域名，是本系统、单位或院所的软硬件平台的名称。

附图3.2

### 域名的管理机构

起初没有专门的域名管理机构，域名的管理工作通常由一些非盈利性的机构承担。一般来说，这些机构是一个全球性的网络组织，其中包括学术研究人员、技术人员、因特网工程师、志愿者等人员，如因特网协会（ISOC）。从1998年起，全球域名的管理职责由因特网域名与地址管理机构（ICANN）来承担。

## IP 地址

域名是人们为了便于记忆而采取的一种命名方式，域名使我们能够方便、快捷地使用因特网。但是在因特网中，作为通信对象的计算机只有通过 IP 地址才能够识别，IP 地址才是网络中计算机的身份标识。我们并不能直接通过域名找到对应的计算机。

计算机相互通信必须有的地址标识，这个地址标识被称 IP 地址，IP 地址可以唯一标识出主机所在的网络及其在网络中的位置编号。

### IP 地址的格式

IP 地址提供统一的格式，传统的 IP 地址是由32个二进制位（bit）组成的。由于二进制使用起来不方便，常用“点分十进制”方式来表示，即将 IP 地址分为4个字节，每个字节以十进制数（0~255）来表示，各个数之间以圆点来分隔。如“218.241.97.41”。每个 IP 地址由两部分组成，即网络标识 netid 和主机标识 hostid。网络标识确定了该主机所在的物理网络，主机标识确定了在某一物理地址上的一台主机。

### IP 地址的分类

因特网的 IP 地址分成 A、B、C、D、E 五类，其中 A、B、C 为基本类，每类有不同长度的网络标识和主机标识。如下图所示。

附图3.3

- A 类：A 类地址分配给少数规模较大的网络，每个 A 类地址的网络有众多的主机，具体规定如下：32位地址域中第一个8位为网络标识，其中第一位为0，表示 A 类地址，其余24位均为主机标识，由该网的管理者自行分配。
- B 类：B 类地址分配给中等规模的网络，每个 B 类地址的网络有较多主机，具体规定如下：32位地址域中前两个8位为网络标识，其中前两位为10，表示 B 类地址，其余16位均为主机标识，由该网的管理者自行分配。
- C 类：C 类地址分配给小规模的网络，每个 C 类地址的网络只有少量主机，具体规定如下：32位地址域中前三个8位为网络标识，其中前三位为110，表示了 C 类地址，其余8位为主机标识，由该网的管理者自行分配。

下图给出了3类 IP 地址的范围、可支持的网络数目和每个网络支持的主机数。

附图3.4

此外，还有两类不属于基本类的地址，D 类和 E 类。D 类用于组播传送至多个目的地址，前4位标识为1110，因此 IP 地址的前8位范围为224-239。E 类用于保留地址，前4位标识为1111，因此 IP 地址的前8位范围为240~255（特殊的 IP 地址：字节为255的表示广播地址，如192.168.1.255；字节为0的表示网络地址，如：192.168.1.0）。

在观察上表之后你会发现没有出现127.x.y.z这样的 IP 地址。这是因为因特网中有一些特殊的 IP 地址，它们具有特殊的用途，如网络标识符127作为环回接口预留。大多数系统把 IP 地址127.0.0.1分配给这个端口。环回接口允许运行在同一台主机上的客户程序和服务器程序通过 TCP/IP 协议通信。如果发送消息给127.0.0.1，此消息将传回给自己。

### IP 地址的管理

ICANN 是负责对全球 Internet 上的 IP 地址进行编号分配的机构，根据 ICANN 的规定，ICANN 将部分 IP 地址分配给地区级的 Internet 注册机构 RIR，然后由 RIR 负责该地区的登记注册服务。IP 地址的分级管理如下图所示：

附图3.5

目前的因特网技术共能提供约40亿个独立 IP 地址，但是这些 IP 地址并没有合理地被分配给各个国家和地区。因为因特网是从美国兴起并以美国为中心发展起来的，因此绝大多数 IP 地址已被美国所占有，使原本有限的 IP 地址出现分配严重不均衡的局面。中国作为世界上人口最多的国家，分得的大多数是 C 类地址，几乎没有 A 类和 B 类地址，而且在总量上与美国比还存在一定差距。由于这样的矛盾日益突出，人类正在考虑使用新的技术，以提供更多的 IP 地址。

在了解了域名与 IP 地址之后，我们要想将计算机接入互联网，首先需要了解计算机是通过什么方式与因特网相连接的。

## 互联网服务组织

计算机与因特网相连，必须要有专门的线路。但是租用数据专线与因特网主干线连接需要很高的费用，一般用户负担不起。于是，就出现了一些商业机构，他们先出钱架设某一地区因特网的主干线路的数据专线，把位于本地区的某台作为服务器的计算机主机与因特网骨干线连通。这样，本地区的用户就可以通过便宜的拨号电话线路进入该服务器，然后通过该服务器间接进入互联网。对这些商业机构来说，虽然每个用户交的钱不多，但达到一定的用户数量之后，则不但可以挣回数据专线以及电脑服务器的昂贵费用，而且还能盈利。提供这种服务的商业机构被成为因特网服务提供商（Internet Server Provider，简称 ISP）

## 设置 IP 地址和子网掩码

### 上网方式

IP 地址是不同网络之间实现计算机相互通信必须具有的唯一地址标识，因此，计算机要加入因特网，在选择好合适的因特网服务提供商之后，下一步该做的工作就是配置 IP 地址。

一般来说，家庭上网采用 ADSL 或 LAN 等方式。

- ADSL（非对称数字用户线环路）：它利用现有的一对铜双绞线，为用户提供上、下行非对称的传输速率，上行为低速传输；下行为高速传输。 适用于有宽带业务需求的普通家庭用户、中小商务用户等。
- LAN：接入方式主要采用以太网技术，以信息化小区的方式为用户服务。在核心节点使用高速路由器，为用户提供 FTTX+LAN 的宽带接入。基本做到千兆到小区、百兆到居民大楼、十兆到用户。

### IP 地址的设置

1. 静态分配法：静态分配法使用的前提是要有足够的 IP 地址，只有这样才可以给每台计算机分配一个固定的 IP 地址。这种方法的优点是易于管理，缺点是浪费 IP 地址资源；
2. 动态分配法：动态分配法指把公用的 IP 地址暂时分配给用户使用。当用户登录网络时，向服务器请求获得一个 IP 地址，服务器将为该用户暂时分配一个 IP 地址，该用户使用完这一 IP 地址或达到一定期限以后，服务器将收回。因此，同一个用户在多次应用中申请到的 IP 地址不一定是同一个。动态分配法的的优点是实现了 IP 地址的动态分配，节约了 IP 地址资源，缺点是安全性较差。

### 新一代 IP 地址：IPv6

随着因特网的迅速发展，当前使用的一套 IP 地址系统已经不能满足使用要求。尽管管理机构制定了一系列管理方法来节省 IP 地址资源，但是资源短缺问题仍然很严重。为此，互联网工程任务组（IETF）正在酝酿推动新一代的 IP 地址。当前的因特网上使用的 IP 地址是在1978年确立的协议。
它由4段8位二进制数字构成。由于因特网协议的当时版本是4，被称为 IPv4。尽管这个协议在理论上有大约43亿个 IP 地址，但是，并不是所有的地址都能得到充分利用。原因在于许多机构并没有充分使用所有的分配地址。IETF 已经提出增加IP地址的两项建议：保留32位格式；创建 IP 协议新版本（IPv6），将 IP 地址空间扩展到128位。

### 子网掩码的设置

可以在“Internet 协议（TCP/IP）属性”对话框中设置“子网掩码”，它只有一个作用，就是将某个 IP 地址划分成网络地址和主机地址两部分。

子网掩码不能单独的存在，它必须结合 IP 地址一起使用。下图就是192.168.1.1和子网掩码为255.255.255.0的二进制的对照：

附图：3.6

在子网掩码中，二进制1表示网络地址位，二进制0表示主机地址位。

传统的各类地址的子网掩码为：

A 类：255.0.0.0。
B 类：255.255.0.0。
C 类：255.255.255.0。

只有通过子网掩码，才能表明一台主机所在的子网与其他子网的关系，使网络正常工作。

## 网关的作用

设置完 IP 地址与子网掩码后，计算机只能与处于同一网络内的其他计算机互相传递数据。这是因为设置了这两项参数后，计算机有了自己的地址，与其他计算机进行数据交换时，数据包有源地址和目标地址，即有明确的来源和去处。但是此时计算机还不能与本局域网以外的计算机进行数据交换，因为我们还没有告诉计算机通过什么途径将数据送到本局域网以外的计算机中。要想与本局域网以外的计算机进行通信，还需要设置网关。网关是将两个使用不同协议的网络段连接在一起的设备。它的作用就是对两个网络段中使用不同传输协议的数据进行互相的翻译转换。网关可以是硬件，如路由器、服务器等，也可以是软件。

## DNS 服务器的作用

通常上网时，在网页浏览器的地址栏中输入的是域名，而计算机是通过 IP 地址识别所要访问的目标的，所以域名与地址之间需要进行转换。

如果只是一些小规模的网络，要实现域名与地址之间的转换只要在各计算机上准备好域名与 IP 地址的对应表就万事大吉了。但是因特网上面有无数台计算机，用这样的方法来实现域名和 IP 地址的转换显然不现实，因此需要专门指定一套转换方案，域名解析系统（DNS，Domain Name System）应运而生。转换任务由 DNS 服务器来完成，而完成这一任务的过程就被称为域名解析。
